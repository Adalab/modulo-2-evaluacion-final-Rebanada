{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["// VARIABLES\nconst resultsList = document.querySelector('.js-characters-list');\nconst inputDisney = document.querySelector('.js-input');\nconst btnSearch = document.querySelector('.js-btn-search');\nconst favoriteList = document.querySelector('.js-favorite-list');\n\nconst url = `https://dev.adalab.es/api/disney?pageSize=15`;\nlet dataDisney = [];\nlet favoritesDisney = [];\n\nconst charactersLS = JSON.parse(localStorage.getItem('characters'));\n\n//pintar el favorite que se guarda en el LS\ninit();\n\nfunction init() {\n  if (charactersLS) {\n    favoritesDisney = charactersLS;\n    renderFavoriteDisney(favoritesDisney);\n  }\n}\n//Quitar de favoritos pulsando en los fav\nfunction handleClickRemoveFavorite(id) {\n  const idSelected = parseInt(id);\n\n  const favoriteFoundIndex = favoritesDisney.findIndex((fav)=> fav._id === idSelected);\n  if(favoriteFoundIndex >= 0){\n    favoritesDisney.splice(favoriteFoundIndex,1);\n  }\n  localStorage.setItem('favorites_disney', JSON.stringify(favoritesDisney));\n  \n  renderFavoriteDisney();\n}\n\n// FUNCIONES\n// Renderizar la lista de personajes\nfunction renderDisney(dataDisney) {\n  let html = '';\n\n  for (const oneDisney of dataDisney) {\n    let imageUrl =\n      oneDisney.imageUrl && oneDisney.imageUrl.length > 0\n        ? oneDisney.imageUrl[0].url\n        : 'https://via.placeholder.com/210x295/ffffff/555555/?text=Disney';\n\n    html += `<li class=\"js-list-disney js_li_characters disney_characters_list\" id=\"${oneDisney._id}\">\n              <div class=\"js-container-disney\">\n                <h3 class=\"js-name-disney disney_characters-list-name\" id=\"${oneDisney._id}\">${oneDisney.name}</h3>\n                <img class=\"disney_characters-list-image\" src=\"${oneDisney.imageUrl}\" alt=\"Disney Character ${oneDisney.name}\" title=\"Disney Character ${oneDisney.name}\"/>\n              </div>\n            </li>`;\n  }\n\n  resultsList.innerHTML = html;\n  addEventCharacter();\n}\n\n// Obtener datos del API\nfunction getDataApi(value) {\n  fetch(url)\n    .then((response) => response.json())\n    .then((data) => {\n      dataDisney = data.data;\n      renderDisney(dataDisney);\n    })\n    .catch((error) => console.log('Error fetching characters:', error));\n}\n//Click en las tarjetas\nfunction addEventCharacter() {\n  const liCharacterList = document.querySelectorAll('.js_li_characters');\n  for (const li of liCharacterList) {\n    li.addEventListener('click', handleClickAddFavorite);\n  }\n}\n\n// Agregar o quitar un personaje favorito\nfunction handleClickAddFavorite(event) {\n  const id = parseInt(event.currentTarget.id);\n  const selectedCharacter = dataDisney.find((item) => item._id === id);\n  const indexCharacter = favoritesDisney.findIndex((item) => item._id === id);\n  if (indexCharacter === -1) {\n    favoritesDisney.push(selectedCharacter);\n  } else {\n    favoritesDisney.splice(indexCharacter, 1);\n  }\n  localStorage.setItem('characters', JSON.stringify(favoritesDisney));\n  console.log(favoritesDisney);\n  renderFavoriteDisney(favoritesDisney);\n}\n\n// Renderizar la lista de personajes favoritos\nfunction renderFavoriteDisney(favoritesDisney) {\n  favoriteList.innerHTML = '';\n  let html = '';\n  for (const oneDisney of favoritesDisney) {\n    let imageUrl =\n      oneDisney.imageUrl && oneDisney.imageUrl.length > 0\n        ? oneDisney.imageUrl[0].url\n        : 'https://via.placeholder.com/210x295/ffffff/555555/?text=Disney';\n\n    html += `<li class=\"js-list-disney js_li_characters fav_card disney_favorite_list\" id=\"${oneDisney._id}\">\n              <div class=\"js-container-disney\">\n                <h3 class=\"js-name-disney disney_characters-list-name\" id=\"${oneDisney._id}\">${oneDisney.name}</h3>\n                <img class=\"disney_characters-list-image\" src=\"${oneDisney.imageUrl}\" alt=\"Disney Character ${oneDisney.name}\" title=\"Disney Character ${oneDisney.name}\"/>\n                <div><i class=\"fa-solid fa-square-xmark icon\" style=\"color: #000000;\"></i></div>\n              </div>\n            </li>`;\n  }\n\n  favoriteList.innerHTML = html;\n}\n// Evento botón de búsqueda\nconst handleClickSearch = (event) => {\n  event.preventDefault();\n  const inputValue = inputDisney.value;\n  const filterList = dataDisney.filter((item) =>\n    item.name.toLowerCase().includes(inputValue.toLowerCase())\n  );\n  console.log(filterList);\n  renderDisney(filterList);\n};\n\nbtnSearch.addEventListener('click', handleClickSearch);\n\n// Código para obtener los datos del API al cargar la página\ngetDataApi('');\n"]}