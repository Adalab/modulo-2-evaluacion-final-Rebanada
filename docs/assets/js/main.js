const resultsList=document.querySelector(".js-characters-list"),inputDisney=document.querySelector(".js-input"),btnSearch=document.querySelector(".js-btn-search"),favoriteList=document.querySelector(".js-favorite-list"),url="https://dev.adalab.es/api/disney?pageSize=15";let dataDisney=[],favoritesDisney=[];const charactersLS=JSON.parse(localStorage.getItem("characters"));function init(){charactersLS&&(favoritesDisney=charactersLS,renderFavoriteDisney(favoritesDisney))}function handleClickRemoveFavorite(e){const i=parseInt(e.currentTarget.id);console.log(i);const t=favoritesDisney.findIndex(e=>e._id===i);favoritesDisney.splice(t,1),localStorage.setItem("characters",JSON.stringify(favoritesDisney)),renderFavoriteDisney(favoritesDisney)}function renderDisney(e){let i="";for(const t of e){t.imageUrl&&t.imageUrl.length>0&&t.imageUrl[0].url;i+=`<li class="js-list-disney js_li_characters disney_characters_list" id="${t._id}">\n              <div class="js-container-disney">\n                <h3 class="js-name-disney disney_characters-list-name" id="${t._id}">${t.name}</h3>\n                <img class="disney_characters-list-image" src="${t.imageUrl}" alt="Disney Character ${t.name}" title="Disney Character ${t.name}"/>\n              </div>\n            </li>`}resultsList.innerHTML=i,addEventCharacter()}function getDataApi(e){fetch(url).then(e=>e.json()).then(e=>{dataDisney=e.data,renderDisney(dataDisney)}).catch(e=>console.log("Error fetching characters:",e))}function addEventCharacter(){const e=document.querySelectorAll(".js_li_characters");for(const i of e)i.addEventListener("click",handleClickAddFavorite)}function handleClickAddFavorite(e){const i=parseInt(e.currentTarget.id),t=dataDisney.find(e=>e._id===i),n=favoritesDisney.findIndex(e=>e._id===i);-1===n?favoritesDisney.push(t):favoritesDisney.splice(n,1),localStorage.setItem("characters",JSON.stringify(favoritesDisney)),console.log(favoritesDisney),renderFavoriteDisney(favoritesDisney)}function renderFavoriteDisney(e){favoriteList.innerHTML="";let i="";for(const t of e){t.imageUrl&&t.imageUrl.length>0&&t.imageUrl[0].url;i+=`<li class="js-list-disney fav_card disney_favorite_list" id="${t._id}">\n              <div class="js-container-disney">\n                <h3 class="js-name-disney disney_characters-list-name" id="${t._id}">${t.name}</h3>\n                <img class="disney_characters-list-image" src="${t.imageUrl}" alt="Disney Character ${t.name}" title="Disney Character ${t.name}"/>\n                <div class="js_x" id="${t._id}">X</div>\n              </div>\n            </li>`}favoriteList.innerHTML+=i,HandleReset()}init();const handleClickSearch=e=>{e.preventDefault();const i=inputDisney.value,t=dataDisney.filter(e=>e.name.toLowerCase().includes(i.toLowerCase()));console.log(t),renderDisney(t)};function HandleReset(){const e=document.querySelectorAll(".js_x");for(const i of e)i.addEventListener("click",handleClickRemoveFavorite)}btnSearch.addEventListener("click",handleClickSearch),getDataApi("");